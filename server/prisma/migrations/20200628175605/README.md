# Migration `20200628175605`

This migration has been generated by gyash24x7 at 6/28/2020, 5:56:05 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
ALTER TABLE "public"."Game" ADD COLUMN "createdById" text  NOT NULL ;

ALTER TABLE "public"."Player" ALTER COLUMN "team" SET DEFAULT E'';

ALTER TABLE "public"."Game" ADD FOREIGN KEY ("createdById")REFERENCES "public"."User"("id") ON DELETE CASCADE  ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200628143436..20200628175605
--- datamodel.dml
+++ datamodel.dml
@@ -1,27 +1,28 @@
 datasource db {
   provider = "postgresql"
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
 }
 model User {
-  id       String   @id @default(cuid())
-  name     String
-  email    String   @unique
-  password String
-  salt     String   @unique
-  avatar   String
-  players  Player[]
+  id           String   @id @default(cuid())
+  name         String
+  email        String   @unique
+  password     String
+  salt         String   @unique
+  avatar       String
+  players      Player[]
+  gamesCreated Game[]
 }
 model Player {
   id     String   @id @default(cuid())
   user   User     @relation(fields: [id], references: [id])
-  team   String
+  team   String   @default("")
   gameId String
   game   Game     @relation(fields: [gameId], references: [id])
   hand   String[]
 }
@@ -31,8 +32,10 @@
   code        String         @unique
   players     Player[]
   status      GameStatus     @default(NOT_STARTED)
   playerCount Int            @default(6)
+  createdById String
+  createdBy   User           @relation(fields: [createdById], references: [id])
   teams       String[]
   activity    GameActivity[]
 }
```


