datasource db {
  provider = "postgresql"
  url = "***"
}

generator client {
  provider = "prisma-client-js"
}

model User {
  id           String   @id @default(cuid())
  name         String
  email        String   @unique
  password     String
  salt         String   @unique
  avatar       String
  players      Player[]
  gamesCreated Game[]
}

model Player {
  id     String   @id @default(cuid())
  user   User     @relation(fields: [userId], references: [id])
  userId String
  team   String   @default("")
  gameId String
  game   Game     @relation(fields: [gameId], references: [id])
  hand   String[]
}

model Game {
  id          String         @id @default(cuid())
  code        String         @unique
  players     Player[]
  status      GameStatus     @default(NOT_STARTED)
  playerCount Int            @default(6)
  createdById String
  createdBy   User           @relation(fields: [createdById], references: [id])
  teams       String[]
  activity    GameActivity[]
}

model GameActivity {
  id          String           @id @default(cuid())
  description String
  type        GameActivityType
  game        Game             @relation(fields: [gameId], references: [id])
  gameId      String
  data        String
}

enum GameActivityType {
  PLAYER_JOINED
  TEAMS_CREATED
  GAME_STARTED
  ASK_CARD
  GIVE_CARD
  DECLINE_CARD
  CALL_SET
}

enum GameStatus {
  NOT_STARTED
  PLAYERS_READY
  TEAMS_CREATED
  IN_PROGRESS
  COMPLETED
}
